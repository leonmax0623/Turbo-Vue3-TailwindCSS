import{H as e,I as s,P as a,f as r,J as o,u as t,o as l,e as n,d,t as m,h as i,K as c,j as u,n as p,O as f,l as v}from"./vendor.36c281f3.js";import{_ as w}from"./Spinner.2e0ab286.js";import{_ as y}from"./Button.4b020695.js";import{_ as b}from"./Input.b03a61c6.js";import{_ as $}from"./Link.4e9a6f0f.js";import{_ as k}from"./Login.103a92d6.js";import{r as g}from"./refreshPassword.0792169f.js";import{u as j,a as x}from"./index.8fc70fb6.js";import"./ExclamationCircleIcon.22c0ccb9.js";import"./meta.48f5205a.js";const{apiRequest:h}=j(),_=e({email:"",token:"",password:"",confirmPassword:""}),{rules:P}=g(_),V=s(P,_),{call:C,data:E,loading:I,errorMsg:L,success:M,reset:R,reponce:U,ready:q}=h("auth/password/reset",{method:"post",data:_}),S=async()=>{V.value.$touch(),R(),V.value.$invalid||(V.value.$reset(),await C())};const B={class:"mt-8"},H={class:"mt-6"},J={key:0,class:"text-green-700 text-sm mb-6"},K={key:1,class:"text-red-500 text-sm mb-6"},O={key:1,class:"space-y-1"},z={key:1},A=n("button",{class:"hidden",type:"submit"},"accessible submit button",-1),D=v(" На страницу входа "),F={setup(e){const{router:s}=x(),{save:v,form:g,v$:j,loading:h,success:P,errorMsg:C,data:R,reponce:F,ready:G}={save:S,form:_,v$:V,loading:I,success:M,errorMsg:L,data:E,reponce:U,ready:q};return a((()=>{const{token:e}=s.currentRoute.value.params,{email:a}=s.currentRoute.value.query;g.token=e,g.email=a})),(e,s)=>{var a,g;return l(),r(k,{title:null!=(g=null==(a=t(R))?void 0:a.message)?g:"Придумайте новый пароль"},{default:o((()=>{var e,a;return[n("div",B,[n("div",H,[t(G)&&t(P)?(l(),d("p",J,m(null!=(e=t(R).message)?e:"Ваш пароль был сброшен"),1)):i("",!0),t(G)&&!t(P)?(l(),d("p",K,m(null!=(a=t(C))?a:"Undefined (network?) error"),1)):i("",!0),n("form",{class:"space-y-6",onSubmit:s[2]||(s[2]=c(((...e)=>t(v)&&t(v)(...e)),["prevent"]))},[t(F)?i("",!0):(l(),r(b,{key:0,label:"Новый пароль",type:"password",modelValue:t(j).password.$model,"onUpdate:modelValue":s[0]||(s[0]=e=>t(j).password.$model=e),error:t(j).password.$error?t(j).password.$silentErrors[0].$message:""},null,8,["modelValue","error"])),t(F)?i("",!0):(l(),d("div",O,[u(b,{label:"Повторите пароль",type:"password",modelValue:t(j).confirmPassword.$model,"onUpdate:modelValue":s[1]||(s[1]=e=>t(j).confirmPassword.$model=e),error:t(j).confirmPassword.$error?t(j).confirmPassword.$silentErrors[0].$message:""},null,8,["modelValue","error"])])),t(F)?i("",!0):(l(),r(y,{key:2,disabled:t(h),class:p([{"cursor-not-allowed":t(h),"opacity-60":t(h)},"w-full justify-center"]),color:"blue",onClick:c(t(v),["prevent"])},{default:o((()=>[t(h)?(l(),r(w,{key:0})):(l(),d("span",z,"Сохранить"))])),_:1},8,["disabled","class","onClick"])),A,u($,{to:{name:"Login"},class:"flex text-sm"},{default:o((()=>[u(t(f),{class:"h-5 w-5 mr-1","aria-hidden":"true"}),D])),_:1})],32)])])]})),_:1},8,["title"])}}};export{F as default};
