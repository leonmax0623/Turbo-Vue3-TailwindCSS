import{V as a,o as e,d as s,j as o,u as r,S as t,c as n,H as i,I as c,ag as m,f as l,J as u,l as d,t as p,av as f,a1 as j}from"./vendor.36c281f3.js";import{_ as v}from"./Office.55bfbecd.js";import{_ as b}from"./Button.4b020695.js";import{u as _}from"./useSuspense.29183c13.js";import{_ as g}from"./Link.4e9a6f0f.js";import{_ as w}from"./Input.b03a61c6.js";import{c as y,s as $}from"./useAvatar.7737e550.js";import{$ as h}from"./drop.cce90c26.js";import{b as k}from"./index.8fc70fb6.js";import{s as C}from"./groups.5d62c0cb.js";import{u as F}from"./useModalForm.1c23c14e.js";import{c as B}from"./carModel.5c695b93.js";import{u as G}from"./useConfirmDialog.ba73d887.js";import{_ as D}from"./Table.ec42ea9a.js";import"./headlessui.esm.b519f347.js";import"./Avatar.4eeca634.js";import"./Dropdown.df5c89e3.js";import"./NavBar.2f63176e.js";import"./departments.4f88a00d.js";import"./meta.48f5205a.js";import"./Spinner.2e0ab286.js";import"./ExclamationCircleIcon.22c0ccb9.js";import"./FormActions.47218f8a.js";import"./Dialog.b36041f9.js";import"./Th.32cd08d3.js";import"./useIntersectionObserver.7ad3d6a4.js";const I={async setup(t){let n,i;const{financeGroup:c,atMountedFinanceGroup:m,v$:l}=T();return[n,i]=a((()=>m())),n=await n,i(),(a,t)=>{var n;return e(),s("div",null,[o(w,{label:"Hазвание финансовая группа",modelValue:r(c).name,"onUpdate:modelValue":t[0]||(t[0]=a=>r(c).name=a),required:!0,error:null==(n=r(l).name.$errors[0])?void 0:n.$message,onBlured:r(l).name.$touch},null,8,["modelValue","error","onBlured"])])}}},{addGroup:M}=C,S=k();let V,x;const A=async()=>{if(!(await x.value.$validate()))return;x.value.$reset();const{message:a,success:e,data:s}=await $.finance_group(V);try{return{message:a,success:e}}finally{e&&(M(s.finance_group),S.success(a))}},O=async()=>{const{id:a}=V;if(a){const s=await h.finance_group(a);e=s,V.id=null==e?void 0:e.id,V.name=null==e?void 0:e.name}var e};function T(){return{render:(...a)=>{const e=t();e.run((()=>{const s=n((()=>!!V.id)),{render:o}=F({title:n((()=>y.modal[s.value?"update":"create"].finance_group)),RawForm:I,atSubmit:A,atClose:()=>e.stop(),atOpen:a=>{V=i({id:null!=a?a:"",name:""}),x=c(B(),V,{$lazy:!0})}});o(...a),m((()=>{V=void 0,x=void 0}))}))},financeGroup:V,atMountedFinanceGroup:O,v$:x}}const E={async setup(s){let t,n;const{state:i,load:c,drop:m,fill:f,reset:j}=C,{render:v}=T(),{drop:b}=G(),_=[{label:"Название",key:"name"}],w=async(a=!1)=>{a&&j(),await f()};return[t,n]=a((()=>w(!0))),t=await t,n(),(a,s)=>(e(),l(D,{onBottomTouched:s[0]||(s[0]=()=>w()),fields:_,items:r(i).raw,onDelete:s[1]||(s[1]=a=>r(b)((()=>r(m)(a)))),onEdit:s[2]||(s[2]=a=>r(v)(a))},{"td-name":u((({value:a,item:{id:e}})=>[o(g,{onClick:()=>r(v)(e)},{default:u((()=>[d(p(a),1)])),_:2},1032,["onClick"])])),_:1},8,["items"]))}},H=d("К финансам "),q=d("Создать "),z={setup(a){const{render:s}=T(),t=_(E);return(a,n)=>(e(),l(v,{title:"Группы доходов / расходов"},{actions:u((()=>[o(b,{type:"secondary",link:{name:"Finances"}},{default:u((()=>[o(r(f),{class:"w-5 h-5 mr-1"}),H])),_:1}),o(b,{color:"blue",onClick:n[0]||(n[0]=()=>r(s)())},{default:u((()=>[o(r(j),{class:"w-5 h-5 mr-1"}),q])),_:1})])),default:u((()=>[o(r(t))])),_:1}))}};export{z as default};
