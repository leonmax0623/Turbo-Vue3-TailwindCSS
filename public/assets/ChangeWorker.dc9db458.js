import{u as e}from"./useSuspense.29183c13.js";import{_ as a}from"./Card.9a20a748.js";import{_ as s}from"./Avatar.4eeca634.js";import{_ as r}from"./Button.4b020695.js";import{d as t,a as l,u as o}from"./index.8fc70fb6.js";import{s as i}from"./employees.2bffecd5.js";import"./useAvatar.7737e550.js";import{_ as n}from"./Spinner.2e0ab286.js";import{r as u}from"./ArrowLeftIcon.b9909565.js";import{V as m,c,o as d,f as p,J as f,e as v,u as y,j as b,d as g,t as j,h as k,X as h,W as w,l as x,n as _}from"./vendor.36c281f3.js";import"./drop.cce90c26.js";const C={class:"flex justify-between items-center"},A={class:"flex justify-start items-center"},T=x(" Выберите нового работника "),$=x("loading"),z={key:1},S={key:0,class:"text-red-600"},W={class:"max-h-96 overflow-y-scroll z-50 relative"},q=x(" Выйти из системы "),B={async setup(e){let B,D;const{apiRequest:I}=o(),{logOut:J,userDepartment:L,setToken:M,setUser:O,user:R}=t(),{router:U,back:V}=l(),{load:X,state:E}=i;[B,D]=m((()=>X({department_id:L.value}))),B=await B,D();const{call:F,data:G,loading:H,errorMsg:K,success:N,reset:P}=I("auth/user-auth",{}),Q=c((()=>E.employees.filter((({roles:e})=>!("admin"===e[0].name||"director"===e[0].name)))));return(e,t)=>(d(),p(a,{class:"mx-auto lg:w-1/2 w-full","main-classes":""},{header:f((()=>{var e;return[v("div",C,[v("span",A,[v("span",{onClick:t[0]||(t[0]=()=>y(V)()),class:"rounded-full hover:bg-gray-200 border text-gray-700 border-gray-200 mr-3 cursor-pointer z-50 transition-colors duration-200 ease-in"},[b(y(u),{class:"w-6 h-6 p-1"})]),T]),y(H)?(d(),p(n,{key:0,h:"4",w:"4"},{default:f((()=>[$])),_:1})):(d(),g("span",z,[y(N)?k("",!0):(d(),g("small",S,j(null!=(e=y(K))?e:"Что-то пошло не так"),1))]))])]})),footer:f((()=>[v("div",null,[b(r,{color:"blue",onClick:t[1]||(t[1]=()=>y(J)(y(U)))},{default:f((()=>[q])),_:1})])])),default:f((()=>[v("div",W,[(d(!0),g(w,null,h(y(Q),((e,a)=>{var r,t,l;return d(),g("div",{key:a,class:_([y(R).id==e.id?"bg-gray-200 border-gray-300":"","py-4 px-4 border block"])},[b(s,{onClick:()=>(async e=>{if(!H.value){if(e===R.value.email)return V();await F("auth/user-auth",{method:"post",data:{email:e}}),N.value&&(O(G.value.user),M(G.value.api_token),setTimeout((()=>{U.push({name:"WorkerTasks"})})))}})(e.email),title:`${null!=(r=e.name)?r:""} ${null!=(t=e.surname)?t:""} ${null!=(l=e.middlename)?l:""}`,image:e.avatar,action:""},{subtitle:f((()=>[x(j(e.email),1)])),_:2},1032,["onClick","title","image"])],2)})),128))])])),_:1}))}},D={class:"w-screen h-screen flex justify-center items-center p-6 lg:p-0"},I={setup(a){const s=e(B);return(e,a)=>(d(),g("div",D,[b(y(s))]))}};export{I as default};
