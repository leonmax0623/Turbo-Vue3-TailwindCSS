import{B as e,ag as t,L as a,M as l,c as s,r,o,d as n,e as u,t as d,j as i,J as c,n as v,u as m,N as p,at as g,h as b,W as f,X as h,Z as y}from"./vendor.36c281f3.js";import{_ as x}from"./Button.4b020695.js";import{u as w}from"./useIntersectionObserver.7ad3d6a4.js";a("data-v-75a3be66");const k={class:"block text-sm font-medium text-gray-700 text-left"},j={class:"relative"},N={class:"sto-select-text whitespace-nowrap text-left"},V={class:"ml-auto font-light h-1 w-5 -mt-4"},_={"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},q={key:0,d:"m16.843 13.789c.108.141.157.3.157.456 0 .389-.306.755-.749.755h-8.501c-.445 0-.75-.367-.75-.755 0-.157.05-.316.159-.457 1.203-1.554 3.252-4.199 4.258-5.498.142-.184.36-.29.592-.29.23 0 .449.107.591.291 1.002 1.299 3.044 3.945 4.243 5.498z"},B={key:1,d:"m16.843 10.211c.108-.141.157-.3.157-.456 0-.389-.306-.755-.749-.755h-8.501c-.445 0-.75.367-.75.755 0 .157.05.316.159.457 1.203 1.554 3.252 4.199 4.258 5.498.142.184.36.29.592.29.23 0 .449-.107.591-.291 1.002-1.299 3.044-3.945 4.243-5.498z"},E=["data-value"],L={class:"block h-px bg-white"};l();const S={props:{label:{type:String,required:!1,default:""},options:{type:Array,required:!1},help:{type:String,required:!1,default:""},error:{type:String,required:!1,default:""},modelValue:{type:[String,Number,Array],required:!1,default:""},search:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","bottomTouched"],setup(a,{emit:l}){const S=a,z=s((()=>{var e;return null==(e=S.options)?void 0:e.map((e=>e instanceof Object?e:{label:e,value:e}))})),R=r(!1),$=r(),A=r(),C=s((()=>{if(A.value){const e=new RegExp(`${A.value}`,"i");return z.value.filter((({value:t,label:a})=>`${t}`.search(e)>-1|`${a}`.search(e)>-1))}return z.value})),{pixel:I,container:O}=w((()=>{l("bottomTouched")}),s((()=>C.value.length>0))),T=s((()=>{var e,t;return 0===z.value.length?"-- пустой --":S.modelValue?null!=(t=null==(e=z.value.find((({value:e})=>e==S.modelValue)))?void 0:e.label)?t:"- значение отсутствует в списке -":"-- выберите --"})),J=e=>{e&&(A.value=void 0),R.value=!!e},M=r(),U=r();!function(a,l,s=!0){if(s){const e=e=>{const t=a.value;null==t||t.contains(e.target)||l(e)};console.log("listener registered"),document.addEventListener("click",e),t((()=>{console.log("event cleared"),document.removeEventListener("click",e)}))}else e((e=>{const t=a.value,s=e=>{null==t||t.contains(e.target)||l(e)};console.log("listener registered"),document.addEventListener("click",s),e((()=>{console.log("event cleared"),document.removeEventListener("click",s)}))}))}(M,(e=>{U.value.contains(e.target)||R.value&&J(!1)}));const W=s((()=>S.disabled||0===C.value.length)),X=e=>{const t=e.target.dataset.value;t&&(l("update:modelValue",Number.isNaN(t)?t:Number(t)),J(!1))};return(e,t)=>{var l;return o(),n("div",null,[u("label",k,d(S.label),1),u("div",j,[u("span",{ref:(e,t)=>{t.btnRef=e,U.value=e}},[i(x,{disabled:m(W),type:"secondary",class:v(["modex-select mt-1 w-full text-base font-thin focus:outline-none sm:text-sm rounded-md shadow-sm",[m(W)?"bg-gray-100":"cursor-pointer"]]),onClick:t[0]||(t[0]=()=>J(!R.value))},{default:c((()=>[u("span",{class:v(["font-normal w-11/12 overflow-hidden",m(W)?"text-gray-400":""])},[u("p",N,d(m(T)),1)],2),u("span",V,[(o(),n("svg",_,[R.value?(o(),n("path",q)):(o(),n("path",B))]))])])),_:1},8,["disabled","class"])],512),i(y,{name:"sto-select"},{default:c((()=>[R.value&&S.options.length?(o(),n("div",{key:0,class:"absolute right-0 left-0 pt-2 z-50",ref:(e,t)=>{t.containerRef=e,M.value=e}},[S.search?p((o(),n("input",{key:0,ref:e=>$.value=e,type:"text",class:"w-full p-2 rounded-md h-9 mb-2 shadow-sm border-gray-300",placeholder:"Поиск ...","onUpdate:modelValue":t[1]||(t[1]=e=>A.value=e)},null,512)),[[g,A.value]]):b("",!0),m(C).length>0?(o(),n("div",{key:1,id:"listing",class:"bg-gray-50 rounded shadow-md overflow-y-scroll border",ref:e=>{O.value=e},onClick:X},[(o(!0),n(f,null,h(m(C),((e,t)=>(o(),n("span",{key:e.value,"data-value":e.value,class:v(["block text-sm p-2 hover:bg-gray-300 cursor-pointer",1+t===m(C).length?"":"border-b border-gray-300"])},d(e.label),11,E)))),128)),u("span",L,[i(m(I))])],512)):b("",!0)],512)):b("",!0)])),_:1})]),u("p",{class:v(["mt-1 text-xs text-red-600",["text-"+(a.error.lenght?"red-600":"gray-500")]])},"  "+d(null!=(l=a.error)?l:a.help),3)])}},__scopeId:"data-v-75a3be66"};export{S as _};
