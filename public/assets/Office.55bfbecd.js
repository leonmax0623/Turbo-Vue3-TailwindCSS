import{T as e,D as t,a as l,b as a,M as s}from"./headlessui.esm.b519f347.js";import{o as r,f as o,j as i,d as n,e as c,t as u,W as d,X as f,n as m,J as p,u as x,a2 as g,i as v,L as b,M as y,P as h,w,r as _,a3 as k,a4 as j,a5 as $,a6 as C,a7 as S,a8 as z,a9 as q,c as A,A as M,aa as B,ab as L,ac as T,ad as D}from"./vendor.36c281f3.js";import{_ as P}from"./Avatar.4eeca634.js";import{_ as W}from"./Dropdown.df5c89e3.js";import{_ as E}from"./NavBar.2f63176e.js";import{_ as F}from"./Input.b03a61c6.js";import{_ as I,d as O}from"./departments.4f88a00d.js";import{s as G}from"./meta.48f5205a.js";import{d as J,a as N,i as X}from"./index.8fc70fb6.js";function H(e,t){return r(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])}function K(e,t){return r(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}const Q={class:"px-2"},R={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider"},U={class:"mt-1 space-y-1",role:"group"},V=["onClick"],Y={class:"truncate"},Z={props:{title:{type:String,required:!1},items:{type:Array,required:!0}},setup(e){const t=e,l=["indigo","blue","red","yellow","green","purple","gray"];return(a,s)=>(r(),n("div",Q,[c("h3",R,u(t.title),1),c("div",U,[(r(!0),n(d,null,f(e.items,((e,t)=>(r(),n("button",{key:e.label,onClick:t=>a.$emit("switch",e.id),class:m(["w-full",e.current?"bg-green-700 text-gray-50":"text-gray-600 hover:bg-gray-50 hover:text-gray-800","group flex items-center px-3 py-2 text-sm leading-5 font-medium rounded-md"])},[c("span",{class:m([`bg-${l[t%l.length]}-500`,"w-2.5 h-2.5 mr-2 rounded-full"]),"aria-hidden":"true"},null,2),c("span",Y,u(e.label),1)],10,V)))),128))])]))}},ee={class:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4  bg-white"},te={class:"absolute top-0 right-0 -mr-12 pt-2"},le=c("span",{class:"sr-only"},"Закрыть",-1),ae=c("div",{class:"flex-shrink-0 w-14","aria-hidden":"true"},null,-1),se={props:{open:{type:Boolean,required:!0}},setup(s){const n=s;return(s,u)=>(r(),o(x(a),{as:"template",show:n.open},{default:p((()=>[i(x(l),{as:"div",class:"fixed inset-0 flex z-40 lg:hidden",onClose:u[1]||(u[1]=e=>s.$emit("close"))},{default:p((()=>[i(x(e),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p((()=>[i(x(t),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})])),_:1}),i(x(e),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:p((()=>[c("div",ee,[i(x(e),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p((()=>[c("div",te,[c("button",{type:"button",class:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:u[0]||(u[0]=e=>s.$emit("close"))},[le,i(x(g),{class:"h-6 w-6 text-white","aria-hidden":"true"})])])])),_:1}),v(s.$slots,"default")])])),_:3}),ae])),_:3})])),_:3},8,["show"]))}};b("data-v-f803c9e0");const re={class:"relative h-screen flex overflow-hidden bg-white"},oe={class:"flex-shrink-0 flex items-center px-4 w-32 mx-auto logo-w"},ie={class:"mt-5 flex-1 h-0 overflow-y-auto"},ne={class:"hidden lg:flex lg:flex-shrink-0"},ce={class:"flex flex-col w-64 border-r border-gray-200 pt-3 pb-4 bg-gray-100"},ue={class:"flex items-center justify-center flex-shrink-0 px-6 h-20 w-30 mx-auto mb-4 logo-w"},de={class:"h-0 flex-1 flex flex-col overflow-y-auto",id:"sidebar-holder"},fe={class:"flex w-full justify-between items-center"},me={class:"px-3 mt-4"},pe={class:"flex flex-col w-0 flex-1 overflow-hidden"},xe={class:"relative z-9 flex-shrink-0 flex h-16 bg-white border-b border-gray-200 lg:hidden"},ge=c("span",{class:"sr-only"},"Открыть меню",-1),ve={class:"flex-1 flex justify-between px-4 sm:px-6 lg:px-8"},be={class:"flex-1 flex"},ye={class:"w-full flex md:ml-0",action:"#",method:"GET"},he={class:"relative w-full text-gray-400 focus-within:text-gray-600"},we={class:"absolute inset-y-0 left-0 flex items-center pointer-events-none"},_e=c("input",{class:"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0 focus:border-transparent focus:placeholder-gray-400 sm:text-sm",placeholder:"Поиск",type:"search"},null,-1),ke={class:"flex items-center"},je=["src"],$e={class:"border-b border-gray-200 py-4 sm:flex sm:items-center sm:justify-between px-3 sm:px-4 lg:px-5"},Ce={class:"flex-1 min-w-0"},Se={class:"text-lg font-medium leading-6 text-gray-900 sm:truncate"},ze={class:"mt-4 flex sm:mt-0 sm:ml-4"},qe={class:"flex flex-wrap gap-2 items-center"},Ae={class:"mt-6 px-3 mb-2 sm:px-4 lg:px-5"};y();const Me={props:{title:{type:String,required:!1},mainClasses:{type:String,required:!1,default:"flex-1 relative z-0 overflow-y-auto focus:outline-none"}},setup(e){const t=e,{setCurrent:l,links:a,load:o}=O;h((async()=>{o.called_from_office||await o(),l.called_from_office||l(),o.called_from_office=!0,l.called_from_office=!0}));const{user:d,logOut:f}=J(),{isCurrentFullPath:g,router:b}=N();w((()=>t.title),(e=>G(e)));const y=_(!1),Q=[[{label:"Профиль",name:"Profile",icon:L}],[{label:"Работа",name:"WorkerTasks",icon:T}],[{label:"Выход",name:"Login",click:()=>f(b),icon:D}]],R=[{label:"Заказ-наряды",name:"Orders",icon:k},{label:"Задачи",name:"Tasks",icon:j},{label:"Причины обращения",name:"Why",icon:$},{label:"Склад",name:"Storages",icon:C},{label:"Клиенты",name:"Clients",icon:S},{label:"Сотрудники",name:"Employers",icon:S},{label:"Финансы",name:"Finances",icon:z},{label:"Отделы",name:"Departments",icon:q}].filter((({name:e})=>X(e))).map((({label:e,name:t,icon:l})=>({label:e,name:t,icon:l,current:g({name:t})}))),U=A((()=>{var e,t;const l=d.value;return(null==l?void 0:l.id)?`${null!=(e=l.name)?e:""} ${null!=(t=l.middle_name)?t:""}`:"Гость"})),V=A((()=>{const e=d.value;return(null==e?void 0:e.roles[0])?`${e.roles[0].title}`:"Гость"}));return(e,o)=>{const f=M("v-can");return r(),n("div",re,[i(se,{open:y.value,onClose:o[0]||(o[0]=e=>y.value=!1)},{default:p((()=>[c("div",oe,[i(I)]),c("div",ie,[i(E,{items:x(R)},null,8,["items"]),i(f,{ability:"crud departments"},{default:p((()=>[i(Z,{key:`mobile-${x(a).lenght}`,items:x(a),onSwitch:x(l),title:"Отделы",class:"mt-8"},null,8,["items","onSwitch"])])),_:1})])])),_:1},8,["open"]),c("div",ne,[c("div",ce,[c("div",ue,[i(I)]),c("div",de,[i(W,{items:Q,direction:"justify",class:"px-3 mt-4"},{default:p((()=>[i(x(s),{class:"group w-full bg-gray-100 rounded-md pl-1 py-2 text-sm text-left font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500"},{default:p((()=>[c("span",fe,[i(P,{action:"",image:x(d).avatar,title:x(U),subtitle:x(V),class:"w-10/12 overflow-hidden"},null,8,["image","title","subtitle"]),i(x(K),{class:"h-5 text-gray-400 group-hover:text-gray-500 w-2/12","aria-hidden":"true"})])])),_:1})])),_:1}),c("div",me,[i(F,{placeholder:"Поиск",icon:x(H)},null,8,["icon"])]),i(E,{items:x(R),class:"px-3 my-4"},null,8,["items"]),i(f,{ability:"crud departments"},{default:p((()=>[i(Z,{key:`descktop-${x(a).lenght}`,items:x(a),onSwitch:x(l),title:"Отделы",class:"mt-8 px-3"},null,8,["items","onSwitch"])])),_:1})])])]),c("div",pe,[c("div",xe,[c("button",{type:"button",class:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 lg:hidden",onClick:o[1]||(o[1]=e=>y.value=!0)},[ge,i(x(B),{class:"h-6 w-6","aria-hidden":"true"})]),c("div",ve,[c("div",be,[c("form",ye,[c("div",he,[c("div",we,[i(x(H),{class:"h-5 w-5","aria-hidden":"true"})]),_e])])]),c("div",ke,[i(W,{items:Q,direction:"right",class:"ml-3 relative"},{default:p((()=>[i(x(s),{class:"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:p((()=>[c("img",{class:"h-8 w-8 rounded-full object-cover",src:x(d).avatar},null,8,je)])),_:1})])),_:1})])])]),c("main",{class:m(t.mainClasses)},[c("div",$e,[c("div",Ce,[v(e.$slots,"title",{},(()=>[c("h1",Se,u(t.title),1)]),{})]),c("div",ze,[c("div",qe,[v(e.$slots,"actions",{},void 0,!0)])])]),v(e.$slots,"before",{},void 0,!0),v(e.$slots,"content",{},(()=>[c("div",Ae,[v(e.$slots,"default",{},void 0,!0)])]),{})],2)])])}},__scopeId:"data-v-f803c9e0"};export{Me as _,H as r};
