var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,p=(e,a)=>{for(var r in a||(a={}))n.call(a,r)&&o(e,r,a[r]);if(t)for(var r of t(a))s.call(a,r)&&o(e,r,a[r]);return e};import{$ as i,_ as d}from"./drop.cce90c26.js";import{c as l}from"./index.8fc70fb6.js";import{H as c,a as g,c as m}from"./vendor.36c281f3.js";const u=l("crud storages"),f=c({raw:[],pages:100,page:1,pending:!1});var w={state:g(f),fill:async e=>{var t,n,s;if(f.pending)return;if(!u)return;if(f.page>f.pages)return;f.pending=!0;const o="storages"+(e.department_id?`/department/${e.department_id}`:""),d=await i({key:o,params:(l=p({},e),c={page:f.page},a(l,r(c)))});var l,c;f.raw=f.raw.concat(null!=(t=null==d?void 0:d.storages)?t:[]),f.pages=null!=(s=null==(n=null==d?void 0:d.meta)?void 0:n.last_page)?s:100,f.page+=1,f.pending=!1},load:async(e={})=>{var a;if(u){const r="storages"+(e.department_id?`/department/${e.department_id}`:"");f.raw=null!=(a=(await i({key:r,params:e})).storages)?a:[]}},add:e=>{const a=f.raw.findIndex((({id:a})=>(null==e?void 0:e.id)==a));a<0?f.raw.push(e):f.raw[a]=e},drop:async e=>d.storage(e,(e=>{f.raw.deleteById(e)})),reset:()=>{f.raw=[],f.pages=100,f.page=1},storages:m((()=>f.raw.map((({id:e,name:a,city:r,created_at:t})=>({id:e,name:a,city:null==r?void 0:r.name,created_at:null==t?void 0:t.split(" ")[0]}))))),options:m((()=>f.raw.map((({id:e,name:a})=>({value:e,label:a})))))};export{w as s};
