import{c as e,E as a,F as s,G as r,H as l,I as t,f as o,J as i,u as m,o as d,e as n,d as c,t as u,h as f,K as p,n as b,j as y,O as v,l as h}from"./vendor.36c281f3.js";import{_ as g}from"./Spinner.2e0ab286.js";import{_ as j}from"./Button.4b020695.js";import{_ as k}from"./Input.b03a61c6.js";import{_ as w}from"./Link.4e9a6f0f.js";import{_ as $}from"./Login.103a92d6.js";import{u as x}from"./index.8fc70fb6.js";import"./ExclamationCircleIcon.22c0ccb9.js";import"./meta.48f5205a.js";const _=e((()=>({email:{required:a.withMessage("Укажите email",s),email:a.withMessage("Укажите верный email",r)}})));const{apiRequest:M}=x(),{rules:E}={rules:_},C=l({email:""}),I=t(E,C),{call:V,data:q,loading:L,errorMsg:P,success:S,reset:U,ready:B}=M("auth/password/email",{method:"post",data:C}),F=async()=>{U(),I.value.$touch(),I.value.$invalid||(I.value.$reset(),await V())};const G={class:"mt-8"},H={class:"mt-6"},J={key:0,class:"text-green-700 mb-6"},K={key:1,class:"text-red-500 text-sm mb-6"},O={key:0},R=n("button",{class:"hidden",type:"submit"},"accessible submit button",-1),z=h(" На страницу входа "),A={setup(e){const{refreshPassword:a,v$:s,data:r,form:l,loading:t,success:h,errorMsg:x,ready:_}={refreshPassword:F,v$:I,data:q,form:C,loading:L,success:S,errorMsg:P,ready:B};return(e,M)=>{var E,C;return d(),o($,{title:null!=(C=null==(E=m(r))?void 0:E.message)?C:"Забыли пароль?"},{default:i((()=>{var e;return[n("div",G,[n("div",H,[m(h)&&m(_)?(d(),c("p",J,u(m(l).email),1)):f("",!0),!m(h)&&m(_)?(d(),c("p",K,u(null!=(e=m(x))?e:"Undefined (network?) error"),1)):f("",!0),n("form",{class:"space-y-6",onSubmit:M[1]||(M[1]=p(((...e)=>m(a)&&m(a)(...e)),["prevent"]))},[m(_)?f("",!0):(d(),o(k,{key:0,label:"E-mail",type:"email",help:"Введите ваш email, на него придёт ссылка для сброса пароля",modelValue:m(s).email.$model,"onUpdate:modelValue":M[0]||(M[0]=e=>m(s).email.$model=e),error:m(s).email.$error?m(s).email.$silentErrors[0].$message:""},null,8,["modelValue","error"])),m(_)?f("",!0):(d(),o(j,{key:1,color:"blue",class:b(["w-full justify-center",{"cursor-not-allowed":m(t),"opacity-60":m(t)}]),onClick:p(m(a),["prevent"]),disabled:m(t)},{default:i((()=>[m(t)?(d(),o(g,{key:1})):(d(),c("span",O,"Отправить"))])),_:1},8,["onClick","disabled","class"])),R,y(w,{href:"/",class:"flex text-sm"},{default:i((()=>[y(m(v),{class:"h-5 w-5 mr-1","aria-hidden":"true"}),z])),_:1})],32)])])]})),_:1},8,["title"])}}};export{A as default};
