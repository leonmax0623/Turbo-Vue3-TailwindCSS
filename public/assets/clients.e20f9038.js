var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,o=(e,a)=>{for(var r in a||(a={}))n.call(a,r)&&l(e,r,a[r]);if(t)for(var r of t(a))i.call(a,r)&&l(e,r,a[r]);return e};import{$ as s,_ as p}from"./drop.cce90c26.js";import{b as c}from"./useAvatar.7737e550.js";import{e as d}from"./index.8fc70fb6.js";import{H as u,a as g,c as m}from"./vendor.36c281f3.js";const f=d(["read clients","crud clients"]),v=u({raw:[],pages:void 0,page:1,pending:!1});var w={state:g(v),reset:()=>{v.raw=[],v.pages=void 0,v.page=1},load:async e=>{f&&(v.raw=await s.clients(e),v.loading=!1)},drop:async e=>p.client(e,(e=>{v.raw.deleteById(e)})),sort:e=>{v.raw.sort(e)},fill:async e=>{var t,n,i;if(v.pending)return;if(!f)return;if(v.page>v.pages)return;v.pending=!0;const l=await s({key:"clients",params:(p=o({},e),c={page:v.page},a(p,r(c)))});var p,c;v.raw=v.raw.concat(null!=(t=null==l?void 0:l.clients)?t:[]),v.pages=null!=(i=null==(n=null==l?void 0:l.meta)?void 0:n.last_page)?i:100,v.page+=1,v.pending=!1},count:m((()=>v.raw.length)),options:m((()=>v.raw.map((e=>({value:e.id,label:`${e.name} ${e.surname}`}))))),directory:m((()=>c(v.raw,"surname",(({id:e,name:a,middle_name:r,avatar:t})=>({id:e,title:`${null!=a?a:""} ${null!=r?r:""}`,image:`${null!=t?t:""}`})))))};export{w as c};
