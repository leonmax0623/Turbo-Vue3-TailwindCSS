import{V as e,o as a,f as s,J as t,j as r,l as o,t as i,u as l,av as m,a1 as d}from"./vendor.36c281f3.js";import{_ as p}from"./Office.55bfbecd.js";import{_ as n}from"./Button.4b020695.js";import{_ as c}from"./Link.4e9a6f0f.js";import{_ as u}from"./Badge.4bd69676.js";import{_ as f}from"./Table.ec42ea9a.js";import{s as j}from"./tasks.208e230d.js";import{a as b}from"./index.8fc70fb6.js";import{u as _}from"./useConfirmDialog.ba73d887.js";import{u as k}from"./useSuspense.29183c13.js";import"./headlessui.esm.b519f347.js";import"./Avatar.4eeca634.js";import"./useAvatar.7737e550.js";import"./Dropdown.df5c89e3.js";import"./NavBar.2f63176e.js";import"./Input.b03a61c6.js";import"./ExclamationCircleIcon.22c0ccb9.js";import"./departments.4f88a00d.js";import"./drop.cce90c26.js";import"./meta.48f5205a.js";import"./Th.32cd08d3.js";import"./useIntersectionObserver.7ad3d6a4.js";import"./Dialog.b36041f9.js";import"./Spinner.2e0ab286.js";const v={async setup(m){let d,p;const{route:n,redirectTo:k}=b(),{id:v}=n.params,{state:y,fill:g,reset:h,drop:T}=j,w=[{label:"Название",key:"name"},{label:"Этап заказ наряда",key:"order_stage"},{label:"Тип",key:"type"},{label:"Ответственная роль",key:"role"},{label:"Порядок",key:"position"},{label:"Дата создания",key:"created_at"}],B=async(e=!1)=>{e&&h(),await g({process_category_id:v})};[d,p]=e((()=>B(!0))),d=await d,p();const{drop:D}=_();return(e,m)=>(a(),s(f,{onBottomTouched:m[0]||(m[0]=()=>B()),fields:w,items:l(y).raw,onDelete:m[1]||(m[1]=e=>l(D)((()=>l(T)(e)))),onEdit:m[2]||(m[2]=e=>l(k)({name:"ProcessTaskEdit",params:{task:e,id:l(v)}}))},{"td-name":t((({value:e,item:{id:a}})=>[r(c,{href:{name:"ProcessTaskEdit",params:{task:a,id:l(v)}}},{default:t((()=>[o(i(e),1)])),_:2},1032,["href"])])),"td-role":t((({value:e,item:a})=>[r(u,{point:!0,color:"blue"},{default:t((()=>[o(i(e.title),1)])),_:2},1024)])),"td-order_stage":t((({value:e})=>[o(i(e.name),1)])),"td-type":t((({item:e})=>[r(u,{point:!0,color:(null==e?void 0:e.is_map)?"green":"purple"},{default:t((()=>[o(i((null==e?void 0:e.is_map)?"Диагностическая карта":"Задачa"),1)])),_:2},1032,["color"])])),"td-position":t((({value:e})=>[o(i(e),1)])),"td-created_at":t((({value:e})=>{var a;return[o(i(null!=(a=null==e?void 0:e.split(" ")[0])?a:"_"),1)]})),_:1},8,["items"]))}},y=o("К списку процессов "),g=o("Добавить задачу "),h={setup(e){const{route:o}=b(),i=k(v);return(e,c)=>{var u;return a(),s(p,{title:`${null!=(u=l(o).params.name)?u:"Процесс"} / Список задач`},{actions:t((()=>[r(n,{type:"secondary",link:{name:"Processes"}},{default:t((()=>[r(l(m),{class:"w-5 h-5 mr-1"}),y])),_:1}),r(n,{color:"blue",link:{name:"ProcessTaskForm",params:{id:l(o).params.id}}},{default:t((()=>[r(l(d),{class:"w-5 h-5 mr-1"}),g])),_:1},8,["link"])])),default:t((()=>[r(l(i),{loadingMsg:"Получение списка задач..."})])),_:1},8,["title"])}}};export{h as default};
