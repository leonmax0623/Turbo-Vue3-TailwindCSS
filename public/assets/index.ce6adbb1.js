import{$ as e,_ as r}from"./drop.cce90c26.js";import{c as n}from"./index.8fc70fb6.js";import{H as a,a as d,c as i}from"./vendor.36c281f3.js";const s=n("crud pipelines"),o=a({raw:[],order_funnel:{},types:{}});var l={state:d(o),funnelById:e=>o.raw.find((({id:r})=>e==r)),options:i((()=>o.raw.map((({id:e,name:r})=>({label:r,value:e}))))),typesOptions:i((()=>Object.entries(o.types).map((([e,r])=>({value:e,label:r}))))),orderFunnelOption:i((()=>{var e,r;return[{value:null==(e=o.order_funnel)?void 0:e.id,label:null==(r=o.order_funnel)?void 0:r.name}]})),load_orders_funnel:async()=>{if(o.order_funnel.id)return o.order_funnel.id;const r=(await e.pipelines({type:"order"}))[0];return r?(o.order_funnel=r,r.id):void 0},load:async(r={})=>{s&&(o.raw=await e.pipelines(r))},reset:()=>{o.raw=[]},drop:async e=>r.pipeline(e,(e=>{o.raw.deleteById(e)})),add:e=>{const r=o.raw.findIndex((({id:r})=>(null==e?void 0:e.id)==r));r<0?o.raw.push(e):o.raw[r]=e},loadTypes:async()=>{o.types=(await e({toast:!0,key:"pipelines/get-types"})).types}};export{l as p};
