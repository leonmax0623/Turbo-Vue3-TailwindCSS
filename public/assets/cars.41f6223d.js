var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,r,n)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[r]=n,i=(e,a)=>{for(var r in a||(a={}))l.call(a,r)&&o(e,r,a[r]);if(n)for(var r of n(a))t.call(a,r)&&o(e,r,a[r]);return e};import{$ as c,_ as p}from"./drop.cce90c26.js";import{e as s}from"./index.8fc70fb6.js";import{H as d,a as m,c as u}from"./vendor.36c281f3.js";const v=s(["crud cars"]),g=d({raw:[],pages:100,page:1,pending:!1}),f=({id:e,car_model:a,vin:r,number:n,client:l})=>({id:e,car_model:null==a?void 0:a.name,vin:r,number:n,client:{name:`${null==l?void 0:l.name} ${null==l?void 0:l.surname}`,id:null==l?void 0:l.id}});var b={state:m(g),reset:()=>{g.raw=[],g.pages=100,g.page=1},load:async(e={})=>{v&&(g.raw=await c.cars(e))},fill:async e=>{var n,l,t;if(g.pending)return;if(!v)return;if(g.page>g.pages)return;g.pending=!0;const o=await c({key:"cars",params:(p=i({},e),s={page:g.page},a(p,r(s)))});var p,s;g.raw=g.raw.concat(null!=(n=null==o?void 0:o.cars)?n:[]),g.pages=null!=(t=null==(l=null==o?void 0:o.meta)?void 0:l.last_page)?t:100,g.page+=1,g.pending=!1},drop:async e=>p.car(e,(e=>{g.raw.deleteById(e)})),cars:u((()=>g.raw.map(f))),options:u((()=>g.raw.map((({id:e,car_model:a})=>{var r,n;return{label:`${null!=(r=a.car_mark.name)?r:""} ${null!=(n=a.name)?n:""}`,value:e}}))))};export{b as c};
