import{b as a,u as s}from"./index.8fc70fb6.js";import{e,c as t,i as r,f as c}from"./useAvatar.7737e550.js";const n=a(),{apiRequest:u}=s();var l=new Proxy((async(a,s,e=!0,t)=>{var r,c;const{call:l,data:o,errorMsg:p,success:i}=u(a,t);return await l(),e&&!i.value&&n.danger(null!=(r=p.value)?r:s),null!=(c=o.value)?c:{}}),{get(a,s){let{path:n,ressource:u}=e(s);"products_requests"===u&&(u="product_requests");const l=t.fetch.error[u];return r(s)?async function(s={},e=!0){var t;const r=await a.call({},n,l,e,{params:c(s)});return null!=(t=Reflect.get(r,u))?t:[]}:async function(s,e=!0){var t;const r=await a.call({},`/${n}/${s}`,l,e);return null!=(t=Reflect.get(r,u))?t:{}}},apply(a,s,r){const{toast:n,params:u,key:l}=r[0];let{path:o,ressource:p}=e(l);const i=t.fetch.error[p];return"tasks-own"===l&&(o="tasks-own"),a.call({},o,i,null==n||n,{params:c(u)})}});const{apiRequest:o}=s();var p=new Proxy((async function(){const{call:a,errorMsg:s,success:e,data:t}=o(`${this.path}/${this.id}`,{method:"delete"});return await a(),{message:s.value,success:e.value,data:t.value}}),{get(a,s){const{path:r,ressource:c}=e(s);return async function(s,e){let{success:n,message:u,data:l}=await a.call({path:r,id:s});return n?("function"==typeof e&&await e(s),u=t.drop.success[c]):u=null!=u?u:t.drop.error[c],{message:u,success:n,data:l}}},apply:(a,s,e)=>a.call(e[0])});export{l as $,p as _};
